---
  - name: Add Docker repository
    yum_repository:
      name: docker
      description: Repository for Docker
      baseurl: https://yum.dockerproject.org/repo/main/centos/7/
      gpgkey: https://yum.dockerproject.org/gpg
      enabled: yes
      params: null
    become: true

  - name: Install docker-engine
    yum:
      name: docker-engine
      state: latest
    become: true

  - name: Install Docker-compose
    shell: curl -L "https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && curl -L "https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/bin/docker-compose && chmod +x /usr/local/bin/docker-compose && chmod +x /usr/bin/docker-compose
    become: true

  - name: Enable and start Docker service
    service: name=docker enabled=yes state=started
    become: true
